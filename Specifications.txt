1 General Game Overview


Metroidvanina’s are 2D adventure puzzle games in which the player(s) control characters moving through rooms and areas. The game uses a side-on perspective where the characters move left and right and can jump up and down. Entities are affected by gravity and must be resting on a platform otherwise they fall. The core gameplay is broken up into distinct levels through which the player must traverse and reach an endpoint making parkour jumps and evading or defeating enemies.


The game is broken into distinct Rooms (3) that the player will progress to the next one when the character crosses a designated exit in the previous Room, which is marked as a gap in the wall, roof or floor, and an invisible “door” that triggers a room change when the player reaches it.


Each Room will take up the entire screen (size: 640 x 400) and will be built out of horizontal blocks to create roofs, floors, and vertical blocks for walls. The game is 70 fps. The player's movements from side to side are near instantaneous and require no acceleration, however jumping and falling will rely on a simplified gravity function.


2 Game Play Details for Core 1-Player Version


2.1 Objectives and Rules


The game is a series of Rooms with platforms that need to be used to reach the exit along with hazards in the form of traps and enemies that must be avoided or defeated, as the player will lose if hit by either. The game starts with the timer set to 0 and the player's goal is to complete all levels as quickly as possible. If the player makes it through all the levels and to the final exit their time will be displayed. Whereas if the player gets hit at any time the game will be over and the player loses. 
  



2.2 Game Objects and/or Object Types
Bodies:
     Player
  

Physical 
        The Player Character(PC) will be a box 16 pixels wide and 32 pixels tall with which will be used as the bounds used for collision interactions. The character will use the sprite of a Knight. The knight will have a 3-5 frame walking animation, and 1 frame jumping and attack animations that will be mirrored depending on the direction of travel. Additionally the Knight will have an attack which will project a sword 32 pixels tall 70 pixels out in the direction of the last travel direction. Upon entering the game the knight will spawn in the top left region of the screen and automatically fall according to the gravity function.
        The player has 2 hit box components, one hurtbox that can detect harmful objects when they enter the body, and one push box that constantly checks the environment to prevent collisions with walls and the roof and floor.




Properties
   * Max Horizontal velocity 200 pixels/second
   * Max downward velocity 300 pixels/second
   * Acceleration general 300 pixels/sec downward
   * Character faces the direction of last input with the sprite getting mirrored if direction input changes
   * Jump
* When jump input is press induce velocity of 400 pixels/sec upward
* The character will accelerate down at 300 pixels per second as long as jump input is held and 700 pixels/sec if not until vertical velocity is 0 at which point the character will accelerate to a maximum of 250 pixels/sec downward.
   * Attack (with sword)
* Extends a hurt box of equal height to character (32px), 70 pixels outward in the last direction of travel (left/right only)
* Can be triggered again once the animation has completed plus 0.5 second (aka 35ticks)
   


   Enemy
        Physical
                The enemy uses the same(ish) size hitbox as the PC (16x32) with which all collision events interact. It uses the sprite of a blob with a movement animation also mirrored depending on direction. When attacked its animation will show it pop like a balloon. Its movement is locked to 70 pixels per second left and right. Movement bounds are defined by looking for a wall in the next pixel in the direction of travel, or if there is no floor on the next pixel, then it will reverse its direction of travel.
        
Properties
* Move left and right at 70 pixels/second
* If detects the edge of platform (by ray facing down in front of the body), reverse direction
* If detects a wall (by ray forward in front of the body), reverse direction
* 

Environment:
* Floor:
Controls the y value of entities. If any portion of the bottom edge of an entities hitbox is in contact with a floor negative vertical velocity is set to 0 and acceleration is ignored
* Roof: 
Prevents upward movement of entities. If any portion of the top edge of an entities hitbox collides with a roof positive vertical velocity is set to 0 and gravity is applied to the entity
* Walls:
Restricts horizontal movement of entities. Solid vertical blocks act as boundaries for the player
* Entrance ways
   * Unmarked box in wall gaps on the edge of the screen. If it detects a player inside its collision box, teleports them to the next room.


* Hazards(traps, environmental)
   * Appear as spikes on top of floor tile. 
   * Have a hurt box that can damage the player when it collides with the players hurtbox.


HUD elements
* Timer shown as minutes and seconds in format (00:00)
* Displayed as text in the top left corner of the screen fixed position
* When the player dies the timer resets and stops until they click the start button


* Main menu
First thing that opens when the program is started along with background music that starts playing immediately. It contains a black background, white title text, and 2 rectangle buttons. The “Game start button” goes to the next scene and starts the game once it is clicked with the left mouse click. Timer starts, gravity starts and makes the player fall into the level. The “Quit button” exits the program. Use mouse to aim the cursor and left click on mouse to click buttons(to be implemented late)


2.3 Game Events
Asynchronous:
Movement 
* Jump: (W) applies velocity of 400 pixels/second
* After Jump is triggered when input is held maintain ~300 pixel/second acceleration downward when released acceleration increases to ~700 pixels/second
* Left, right.(A / D) Move 3 pixels per tick either way. If a player attempts to walk into a v-environment (aka wall), they are [either pushed back by the same or greater strength, or the movement is canceled before it happens]. Movement is still possible even while jumping or falling. When input is released velocity is set to 0.


Attack (mouse click)
* The sword is summoned in the player's last input direction. Slash animations last 35ticks after which the object disappears and can be used again
* The hurt box of the attack interacts with enemies only if there is collision of any amount
* The size stays the same throughout the animation
* Position moves relative to the player


Collisions:


Entity and Wall: Upon collision if x position of wall is > x position of entity positive x velocity is set to 0, if x position of wall < x position of entity negative x velocity is set to 0.


Entity and Floor: Upon collision negative velocity is set to 0 gravity acceleration disabled.


Player and enemy: If any portion of the player character collides with the hitbox of the spikes it triggers game over screen. Bring the Main menu up.


Player and Spikes: If any portion of the player character collides with the hitbox of the spikes it triggers game over screen. Bring the Main menu up.


Enemy and Sword: If any portion of the enemy hitbox collides with the enemy it will trigger the death animation and disable collision with the player hitbox




Synchronous:
* Inquire floor: check for floor under entities. If found vertical velocity is set to 0. If not found, add downward acceleration at 300 pixels per second.
* Inquire wall: when moving, check for walls ahead of entities in the direction of travel. If a wall is detected horizontal velocity is set to 0.
* Timer: increments by 1 second every 70 ticks(frames) until seconds reach 59 at which point the next increment will set seconds to 0 and increment minutes by 1


Condition-based event:
Enemy front-down-ray facing no h-floor (aka platform edge) -> direction flip
Enemy front-ray facing v-wall -> direction flip
Sword hit box contact enemy hit box -> Enemy disappears 
In air (inquire floor detects no floor) -> fall according to gravity 
Player detects harmful object in the hurt box collision -> resets the program 




Objects
Object Name/Type
	 Properties
	Behaviours
	Player Character
	Position (integer pair: x, y)
Horizontal_velocity (signed integer)
Vertical_velocity (signed integer)
Grounded (integer “boolean”)
Attacking (integer “boolean”
Size (constant integer pair: height 32, width 16)
	move
jump
attack




	Attack
	Position (integer pair offset from player: x, y)
	update 
	Enemy
	Position (integer pair: x, y)
Horizontal_velocity (signed integer)
Vertical_velocity (signed integer)
Grounded (integer ”boolean”)
Bound_left (integer pair: x, y)
Bound_right (integer pair: x, y)
Size (constant integer pair: height 32, width 16)
DEAD (integer “boolean”)
	move
update
	Roof
	Position (constant integer pair: x, y)
Size (constant integer pair: height, width)
	update
	Floor
	Position (constant integer pair: x, y)
Size (constant integer pair: height, width)
	update
	Wall
	Position (constant integer pair: x, y)
Size (constant integer pair: height, width)
	update 
	Timer
	Position (constant integer pair: x, y)
Size (const integer pair: x, y)
Display_value (integer)
	update
	Trap
	Position (constant integer pair: x, y)
Size (constant integer pair: height, width)
	update
	Exit
	Position (constant integer pair: x, y)
Size (constant integer pair: height, width)
	update
	Room
	Selector (integer)
	update
	

Asynchronous (Input) Events
Event Name
	 Trigger Input Event
	Description
	Attack Request
	Space bar is pressed
	Will set Attacking to 1
	Jump Request
	“W” key is pressed
	Will set players vertical velocity to positive 400 pixels/second 
	Move Right Request
	“D” key is pressed
	Will set players horizontal velocity to positive 200 pixels/second 
	Move Left Request
	“A” key is pressed
	Will set players horizontal velocity to negative 200 pixels/second
	Quit
	ESC key is pressed
	Sets end game flag
	







Synchronous (Timed) Events
Event Name
	Trigger Timing
	Description
	Move Character 
	Every 1/70th of a second
	The character moves horizontally horizontal_velocity pixels updating the x of the character object position. The character moves vertically vertical_velocity pixels updating the y of the character object position.
	Move Enemy
	Every 1/70th of a second
	The enemy moves horizontally horizontal_velocity pixels updating the x of the enemy object position. The enemy moves vertically vertical_velocity pixels updating the y of the character object position.
	Enemy bound check
	Every 1/70th of a second
	Checks position against bound, if horizontal_velocity is positive then x_bound_right - x_position, If horizontal_velocity is negative then x_position - x_bound_left. If the result < 0 then horizontal_velocity for the enemy object is negated.  
	Increment Timer
	Every second
	The timer is incremented by one.
	









Condition-Based (Cascaded) Events
Event Name
	Trigger Condition
	Description
	Bottom of Player Character Floor Collision
	Bottom edge of player hitbox is less than or equal to top edge of floor box if vertical_velocity is negative
	The player characters vertical_velocity is updated to 0
	Top of Player Character Floor Collision
	Top edge of player hitbox is greater than or equal to the top edge of floor box if player vertical_velocity is positive
	The player characters vertical_velocity is updated to 0
	Player Character Gravity
	The players character Grounded flag is 0, and vertical_velocity is 0
	Player characters vertical_velocity is decreased by 5 pixels/second
	Player Character Right Wall Collision 
	Player Characters right edge is greater than or equal to the left edge of wall box
	Player characters positive horizontal_velocity is updated to 0


	Player Character Left Wall Collision
	Player Characters left edge is less than or equal to the right edge of wall box
	Player characters negative horizontal_velocity is updated to 0
	Right Edge of Player Character and Enemy Collision
	The right edge of the player hitbox is greater than or equal to the left edge of the Enemy hitbox and the bottom of the Player character bottom edge is less than or equal to the top edge of the Enemy hitbox or the top edge of the player hitbox is greater than or equal to the bottom edge of the enemy hitbox
	Game end flag is updated
	Left Edge of Player Character and Enemy Collision
	The left edge of the player hitbox is less than or equal to the right edge of the Enemy hitbox and the bottom of the Player character bottom edge is less than or equal to the top edge of the Enemy hitbox or the top edge of the player hitbox is greater than or equal to the bottom edge of the enemy hitbox
	Game end flag is updated
	Right of Player Character and Door Collision
	Bottom edge of player character is greater than or equal to bottom of doorway, top edge of player character is less than or equal to the doorway and right edge of player hitbox is greater than or equal to left edge of doorway hitbox
	Increments Room Selector integer
	Left of Player Character and Door Collision
	Bottom edge of player character is greater than or equal to bottom of doorway, top edge of player character is less than or equal to the doorway and left edge of player hitbox is greater than or equal to right edge of doorway hitbox
	Increments Room Selector integer
	Player Character and Trap Collision
	Bottom of player character hitbox is less than or equal to top edge of trap hitbox and left edge of player character hitbox > right edge of trap < right edge of trap, or right edge of player character hitbox > left edge of trap < right edge of trap
	Game end flag is updated
	Attack and Enemy Collision
	Detect player sword hitbox within the body (The right edge of the enemy hitbox is greater than or equal to the left edge of the sword hitbox and the bottom of the enemy character bottom edge is less than or equal to the top edge of the sword hitbox or the top edge of the enemy hitbox is greater than or equal to the bottom edge of the sword hitbox)
	Death animation and sound is started
	Bottom of Enemy and Floor Collision
	Front bottom edge of enemy hitbox hit no floor
	Enemy horizontal_velocity is updated by multiplying *-1
	Top of Enemy and Floor Collision
	Top edge of enemy hitbox is greater than or equal to the top edge of floor box if enemy vertical_velocity is positive
	

	Enemy Left Wall Collision
	Enemy box  left edge is less than or equal to the right edge of wall box
	Enemy positive horizontal_velocity is updated to 1


	Enemy Right Wall Collision
	Enemy box right edge is greater than or equal to the left edge of wall box
	Enemy positive horizontal_velocity is updated to -1
	

2.4 Hypothetical Gaming Session
The game starts with the player at the top left region of the screen in a ‘safe/tutorial room’ which contains a floor along the bottom of the screen, walls on both edges with a series of platforms leading to a gap in the wall at the midpoint of the screen. The second room has again a floor along the bottom and walls at both edges of the screen. The platforms form a snaking corridor containing environmental traps (aka spikes) and the player will traverse the level avoiding the spikes on the way to the one gap in the top right corner. way to the top of the room where another door exists to bring you to the last room. That room has a moving enemy and end object that when reached, finishes the game.


From the main menu the player can aim and click the start button with their mouse, then the player will spawn in the air near the top left corner of the screen and fall to the ground. The Level will have 3 consecutive, ascending  platforms with the floor exit door appearing on the third. The player will jump using the platforms to get to the door at which time they will progress to the next floor.


The player will spawn on the left side of the screen, beside a gap on the wall behind them that can be used to enter the first room. The second room will be a more complicated map and have spikes across the bottom floor. The player has to jump across the platforms and try to avoid the spikes to get to the top of the screen where there is a gap in the room roof with an invisible door that leads to the next room.


The player lands on the right side of a small gap in the floor that can be used to get back to the second room. The last room has a big platform in the middle and 1 enemy moving back and forth on it, which the player has to pass in order to reach the end object exit finish line. Once the end object detects the player entering it, the game has been won! (It immediately resets the game and they go back to the main menu.) or (It summons a win menu that is a reskined main menu whose only difference is the text it has says “You escaped!” instead of the title)


3 Game Play Details for Core 2-Player Version
Work together to find the exit.
When one player reaches the door to the next screen, teleport both players to the next room together. If one player dies, they are left on a black death screen while the other player continues. If they both die, the game resets.
There is no collision between the 2 players
Both characters can see the screen at the same time and interact with the game at the same time. 


4 Sound Effects
Background music - bam bam do do do - Starts immediately after the program loads in.
Attack noise - zzzz - Starts when sword is first summoned
enemy die - phwlip - Starts when the death animation is summoned
jump - brring - Starts when the input is clicked and the jump first starts. 


5 Additional Features
Multiple routes and more mazelike and fun
Score board
Game over screen